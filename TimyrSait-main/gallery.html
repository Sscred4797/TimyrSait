<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Галерея – Тимур</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="site-header">
    <h1>Галерея</h1>
    <p class="subtitle">Натисніть на зображення, щоб побачити його в повному розмірі</p>
  </header>

  <nav>
    <a href="index.html">Головна</a>
    <a href="about.html">Про мене</a>
    <a href="hobbies.html">Хобі</a>
    <a href="gallery.html" aria-current="page">Галерея</a>
    <a href="contacts.html">Контакти</a>
  </nav>

  <main class="gallery-container" aria-live="polite">
    <figure class="gallery-item">
      <button class="thumb-btn" aria-label="Відкрити зображення 1">
        <img loading="lazy" src="img/timyr1.jpg" data-full="img/timyr1.jpg" alt="Відпочинок на природі">
      </button>
      <figcaption>Відпочинок на свіжому повітрі — відновлюю енергію та знаходжу натхнення</figcaption>
    </figure>

    <figure class="gallery-item">
      <button class="thumb-btn" aria-label="Відкрити зображення 2">
        <img loading="lazy" src="img/timyr2.jpg" data-full="img/timyr2.jpg" alt="Навчання та розвиток">
      </button>
      <figcaption>Навчання і робота над собою — крок за кроком до нових вершин</figcaption>
    </figure>

    <figure class="gallery-item">
      <button class="thumb-btn" aria-label="Відкрити зображення 3">
        <img loading="lazy" src="img/timyr3.jpg" data-full="img/timyr3.jpg" alt="Дитячі спогади">
      </button>
      <figcaption>Дитинство і теплі спогади — моменти, що гріють серце</figcaption>
    </figure>
  </main>

  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="lightbox-backdrop" data-dismiss></div>

    <div class="lightbox-content" role="document" aria-live="polite">
      <figure class="lb-figure">
        <img id="lb-image" src="" alt="">
        <div class="lb-controls">
          <button class="lb-prev" aria-label="Попереднє">&#10094;</button>
          <button class="lb-close" aria-label="Закрити">&times;</button>
          <button class="lb-next" aria-label="Наступне">&#10095;</button>
        </div>
        <figcaption id="lb-caption" class="lb-caption"></figcaption>
      </figure>
    </div>
  </div>

  <footer class="site-footer">
    <p>Автор сайту: Тимур</p>
  </footer>

  <script>
    const thumbs = Array.from(document.querySelectorAll('.thumb-btn img'));
    const lightbox = document.getElementById('lightbox');
    const lbImage = document.getElementById('lb-image');
    const lbCaption = document.getElementById('lb-caption');
    const closeBtn = document.querySelector('.lb-close');
    const prevBtn = document.querySelector('.lb-prev');
    const nextBtn = document.querySelector('.lb-next');
    const backdrop = document.querySelector('.lightbox-backdrop');

    let currentIndex = -1;

    function openLightbox(index) {
      const img = thumbs[index];
      const full = img.dataset.full || img.src;
      lbImage.src = full;
      lbImage.alt = img.alt || '';
      lbCaption.textContent = img.closest('figure')?.querySelector('figcaption')?.textContent || '';
      currentIndex = index;
      lightbox.setAttribute('aria-hidden', 'false');
      lightbox.classList.add('open');
      document.body.style.overflow = 'hidden';
      closeBtn.focus();
    }

    function closeLightbox() {
      lightbox.setAttribute('aria-hidden', 'true');
      lightbox.classList.remove('open');
      lbImage.src = '';
      currentIndex = -1;
      document.body.style.overflow = '';
    }

    function showNext() {
      if (currentIndex < thumbs.length - 1) openLightbox(currentIndex + 1);
      else openLightbox(0);
    }
    function showPrev() {
      if (currentIndex > 0) openLightbox(currentIndex - 1);
      else openLightbox(thumbs.length - 1);
    }

    thumbs.forEach((img, i) => {
      img.closest('.thumb-btn').addEventListener('click', (e) => {
        e.preventDefault();
        openLightbox(i);
      });
    });

    closeBtn.addEventListener('click', closeLightbox);
    nextBtn.addEventListener('click', showNext);
    prevBtn.addEventListener('click', showPrev);
    backdrop.addEventListener('click', closeLightbox);

    document.addEventListener('keydown', (e) => {
      if (lightbox.classList.contains('open')) {
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowRight') showNext();
        if (e.key === 'ArrowLeft') showPrev();
        if (e.key === 'f' || e.key === 'F') {
          if (document.fullscreenElement) document.exitFullscreen();
          else lightbox.requestFullscreen?.();
        }
      }
    });
  </script>
</body>
</html>
